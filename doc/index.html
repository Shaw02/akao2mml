<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'
            'http://www.w3.org/TR/html4/loose.dtd'>

<html lang='ja'>

<head>
	<meta http-equiv='Content-Type' content='text/html;charset=Shift_JIS'>
	<meta http-equiv='Content-Style-Type' content='text/css'>
	<link rel='stylesheet' type='text/css' href='doc.css'>
	<title>Akao2MML</title>
</head>

<BODY>
<!--────────────────────────────────────
	ツールバー（レイヤー２）
─────────────────────────────────────-->
<div id='header'>

<table>
<tr><td width='640pt'><i>Akao2MML</i></td></tr>
</table>
<!--（↑このコンテンツの位置。）-->

</div>
<!--────────────────────────────────────
	コンテンツ本体（レイヤー１）
─────────────────────────────────────-->
<div id='contents'>

<h2>概要</h2>
<!--─────────────────────────────-->
このアプリケーションは、SQUARE ENIX社（旧SQUARE社）のAKAOフォーマットを
<a href='http://platz.jp/~mml2mid/'>MML2MID</a>仕様のMML(Music Macro Language)に逆コンパイルします。<br>
<br>
<h3>FF7MML.COM</h3>
初期のPlaystation用SQUAREソフト用です。<br>
<ul>
<li>FINAL FANTASY 7<br>
<li>Saga Frontia<br>
</ul>
<br>
<h3>FF8MML.COM</h3>
後期のPlaystation用SQUAREソフト用です。<br>
<ul>
<li>FINAL FANTASY 8<br>
<li>FINAL FANTASY 9<br>
<li>VAGRANT STORY<br>
</ul>
<br>

<br><br>
<h2>動作条件</h2>
<!--─────────────────────────────-->
<ol type='1'>
<li>Microsot社製MS-DOS及び、NEC製PC98用MS-DOSの、version 3.30d以降。<br>
	（64bit版Windowsは、未対応）<br>
<li>NEC社V30シリーズ、intel社i80186若しくは、その上位互換のCPU。<br>
	プロテクトモード、Intel 64、AMD64及びIA-64モード時は動作しません。<br>
	仮想86モード（32bit版WindowsのDOS窓、コマンドプロンプト）での動作は確認しております。<br>
	又、その際、ファイル名及びフォルダ名は、MS-DOSの仕様である必要があります。<br>
<ul><li>ファイル名は半角８文字以内、拡張子は半角３文字以内。<br>
	<li>使用できる文字は、"0"〜"9","A"〜"Z","_"。<br>
</ul>
<li>MS-DOSの空きメモリは、128kByte以上空いていれば、充分のはずです。<br>
	640kByte以上のメモリを積んでいるマシンなら、問題ないはず。<br>
	Windowsには、問題ありまくりかもしれないが。<br>
</ol>


<br><br>
<h2>使用方法</h2>
<!--─────────────────────────────-->
コマンドラインに、次の通りに打ち込んでください。<br>
尚、（）内は省略可能です。<br>
<br>
FF7MML <var>ファイル名１（.SND）</var> （><var>ファイル名２.MML</var>）<br>
FF8MML <var>ファイル名１（.SND）</var> （><var>ファイル名２.MML</var>）<br>
<br>
<var>ファイル名１(.SND)</var>は、逆コンパイルする元ファイルを指定します。<br>
拡張子を省略した場合は、自動的に拡張子を".SND"とします。<br>
拡張子がないファイルを指定する場合は、"<var>ファイル名１.</var>"とピリオドまで記述して下さい。<br>
元ファイルは、AKAOフォーマットである必要があります。<br>
<br>
><var>ファイル名２.MML</var>を指定した場合、指定したファイルに逆コンパイルしたMMLを出力します。<br>
省略した場合は、MS-DOSに設定されている標準出力（通常は画面）に出力します。<br>
MMLの文法は、別途、<a href='http://platz.jp/~mml2mid/'>MML2MID</a>のドキュメントを参照して下さい。<br>
<br>


<br><br>
<h2>仕様</h2>
<!--─────────────────────────────-->
<ul>
<li>ヘッダーに"AKAO"の文字列がある曲データを、逆MMLコンパイルします。<br>
	（PSFファイルそのものには使用できません。）<br>
<li>ゲームCD-ROM内の拡張子『.SND』は、曲データですのでそのままで使えます。<br>
	しかしながら、殆どの曲データは、CD-ROM内の様々なファイルに格納されています。<br>
	従って、曲データ単体への切り出しが必要になります。<br>
	尚、圧縮されているファイルが多いので、その場合は切り出し前に圧縮の解凍が必要になります。<br>
	（別手段として、拡張子が*.EXEファイルのPSFファイルから、切り出せるそうです。）<br>
<li>チャンネル17〜32は、MIDIポート2番用に出力します。<br>
<li>17チャンネルを超えるデータは、2ポート以上に対応したSMFプレイヤーが必要です。<br>
	Microsoft Media Playerは、1ポートのみしか対応していないため、
	チャンネル1〜16しか再生されません。<br>
	又、２ポート分のMIDI音源が必要です。<br>
<li>各チャンネルの逆MMLコンパイル前に、無限ループの解析をします。<br>
	ループアドレスの解析結果に基づいて、２回ループさせるように設計しています。<br>
	解析結果は、『/*Loop=<var>addr1</var>,<var>addr2</var>*/』と、コメントアウトして各チャンネルの先頭に出力されます。<br>
	<var>addr1</var>は、無限ループコマンドが示す絶対アドレスです。<br>
	<var>addr2</var>は、チャンネル内で無限ループコマンドが２回使われた時のアドレスを示します（条件ジャンプコマンド（0xFE 0x07）があった場合）。<br>
<li>未解析のコマンド及び非対応のコマンドは、『/* 〜 */』でコメントアウトしてMMLファイルに出力します。<br>
	主に、解析が目的です。何のコマンドか解ったら、是非教えてください。<br>
</ul>
<br>

<h3>FF7MML.COM</h3>
初期のPlaystation用SQUAREソフト用です。<br>
<ul>
<li>"define.mml"にて、MIDI音源の初期設定及び、音色を定義できます。<br>
<li>定義の文法については、<a href='http://platz.jp/~mml2mid/'>MML2MID</a>の取扱説明書及び、
	MIDI規格（<a href="http://www.amei.or.jp/">AMEI</a>より発刊）を参照して下さい。<br>
</ul>
<br>

<h3>FF8MML.COM</h3>
後期のPlaystation用SQUAREソフト用です。<br>
<ul>
<li>曲データ毎に音色番号に割り当てられる音色が異なる為、"define.mml"は使用しません。
<li>出力後のMMLファイルの最後尾に、音色定義用のマクロを出力しますので、
	そちらを曲データ毎に編集して下さい。<br>
</ul>
<br>


<br><br>
<h2>参考資料</h2>
<!--─────────────────────────────-->
<li><a href='format.txt'>AKAOファイルのフォーマット</a><br>
<li><a href='assemble.txt'>アセンブルの方法について</a><br>


<br><br>
<h2>改訂履歴</h2>
<!--─────────────────────────────-->
<li><a href='revision.txt'>改訂履歴</a><br>


<br><br>
</div>
<!--────────────────────────────────────
	フッター
─────────────────────────────────────-->
<div id='footer'>

<table>
<tr><td width='640pt' colspan='4'><i>Akao2MML</i><br></td></tr>
</table>

</div>
<!--────────────────────────────────────-->
</BODY>
</html>
